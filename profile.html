{% extends "layout.html" %}
{% block title %}User Profile{% endblock %}

{% block content %}
<h1>ðŸ‘¤ User Profile</h1>
<p>Update your biometrics here. Your TDEE and goals will be recalculated.</p>

<div class="card">
    <h2 class="card-title">Your Details</h2>
    <form action="{{ url_for('profile') }}" method="POST">
        <div class="form-group">
            <label for="height">Height (cm)</label>
            <input type="number" step="0.1" class="form-input" id="height" name="height" value="{{ user.height }}">
        </div>
        <div class="form-group">
            <label for="weight">Weight (kg)</label>
            <input type="number" step="0.1" class="form-input" id="weight" name="weight" value="{{ user.weight }}">
        </div>
        <div class="form-group">
            <label for="age">Age</label>
            <input type="number" class="form-input" id="age" name="age" value="{{ user.age }}">
        </div>
        <div class="form-group">
            <label for="gender">Gender</label>
            <select class="form-select" id="gender" name="gender">
                <option value="male" {% if user.gender == 'male' %}selected{% endif %}>Male</option>
                <option value="female" {% if user.gender == 'female' %}selected{% endif %}>Female</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="preference">Diet Preference</label>
            <select class="form-select" id="preference" name="preference">
                <option value="Non-Vegetarian" {% if user.preference == 'Non-Vegetarian' %}selected{% endif %}>Non-Vegetarian (Everything)</option>
                <option value="Vegetarian" {% if user.preference == 'Vegetarian' %}selected{% endif %}>Vegetarian (No Meat)</option>
            </select>
        </div>

        <div class="form-group">
            <label for="activity">Activity Level</label>
            <select class="form-select" id="activity" name="activity">
                <option value="1.2" {% if user.activity == 1.2 %}selected{% endif %}>Sedentary (little or no exercise)</option>
                <option value="1.375" {% if user.activity == 1.375 %}selected{% endif %}>Light (1-3 days/week)</option>
                <option value="1.55" {% if user.activity == 1.55 %}selected{% endif %}>Moderate (3-5 days/week)</option>
                <option value="1.725" {% if user.activity == 1.725 %}selected{% endif %}>Active (6-7 days/week)</option>
                <option value="1.9" {% if user.activity == 1.9 %}selected{% endif %}>Very Active (hard exercise)</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Save Profile</button>
    </form>
</div>

<div class="card">
    <h2 class="card-title">Your Calculated Goals</h2>
    <div class="progress-grid">
        <div class="progress-metric">
            <div class="label">Calorie Goal (TDEE)</div>
            <div class="value">{{ user.tdee|round|int }} <small>kcal</small></div>
        </div>
        <div class="progress-metric">
            <div class="label">Protein Goal</div>
            <div class="value">{{ user.protein_goal|round|int }} <small>g</small></div>
        </div>
    </div>
</div>
{% endblock %}